import{a as d,j as e,N as m,r as p,e as h,f as u,b as t,z as g,O as o,F as j}from"./index-a646533f.js";import{P as f}from"./index.esm-fb358e0a.js";import{B as b}from"./BreadCrumbs-b9ca7c48.js";import{P as y}from"./ProdFilter-37790635.js";import{a as N}from"./index.esm-041452e2.js";import{a as k}from"./index.esm-e3d69749.js";const v=({order:s,selectedOrder:n,setSelectedOrder:c})=>{const i=d();return e.jsxs("tr",{onClick:()=>i(`/orders/order-details/${s==null?void 0:s.id}`,{state:{order:s}}),className:"bg-white border-b cursor-pointer dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[e.jsx("td",{className:"w-4 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:s==null?void 0:s.id,disabled:(s==null?void 0:s.status)==="cancel",onClick:l=>l.stopPropagation(),onChange:l=>l.target.checked?c(a=>[...a,+l.target.id]):c(a=>a.filter(x=>x!==+l.target.id)),type:"checkbox",checked:n.findIndex(l=>l===(s==null?void 0:s.id))>=0,className:"w-4 h-4 text-blue-600 bg-gray-100 bproduct-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:bproduct-gray-600 cursor-pointer"}),e.jsx("label",{htmlFor:s==null?void 0:s.id,className:"sr-only",children:"checkbox"})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-900 whitespace-nowrap dark:text-white",children:e.jsx("div",{className:"pl-3 ",children:e.jsx("div",{className:"text-md font-semibold",children:s==null?void 0:s.user.name})})}),e.jsx("td",{className:"px-6 py-4 text-gray-900 whitespace-nowrap dark:text-white",children:e.jsx("div",{className:"pl-3 ",children:e.jsxs("div",{className:"text-md font-semibold",children:["#",s==null?void 0:s.id]})})}),e.jsxs("td",{className:"px-6 min-w-[150px] py-4",children:[s==null?void 0:s.status,e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 inline-block ${m[s==null?void 0:s.status]}`})]}),e.jsxs("td",{className:"px-6  py-4",children:[s==null?void 0:s.total_price," ج.م"]}),e.jsx("td",{className:"px-6  py-4",children:new Date(s==null?void 0:s.created_at).toLocaleDateString()})]})},w=[{text:"قيد التنفيذ",value:"pending"},{text:"تم التنفيذ",value:"verified"},{text:"جاري التوصيل",value:"shipping"},{text:"تم التوصيل",value:"shipped"},{text:"ملغي",value:"cancel"}],M=()=>{const[s,n]=p.useState([]),{orders:c}=h(a=>a.order);console.log(s);const i=u(),l=async a=>{s.length>0&&(await i(o({ids:s,status:a})),n([]))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-gray-700 bg-gray-50 dark:bg-gray-700 dark:text-gray-400 flex justify-between w-full py-3 px-[18px]",children:[e.jsx("div",{className:"col flex items-center gap-2",children:e.jsxs("div",{className:"text flex items-center gap-1",children:[e.jsx("p",{className:"my-1 font-semibold",children:"الطلبات"}),e.jsxs("span",{className:"text-xs mr-1 text-gray-500",children:["(",c.length," طلب)"]})]})}),e.jsx("div",{className:"col",children:e.jsxs(t.Menu,{placement:"bottom-end",children:[e.jsx(t.MenuHandler,{children:e.jsxs("div",{className:"border select-none border-purple-500 rounded-sm p-2 flex items-center gap-1 cursor-pointer text-xs",children:[e.jsx(N,{}),"تحرير سريع"]})}),e.jsxs(t.MenuList,{className:"p-0",children:[e.jsx(t.MenuItem,{className:"flex items-center justify-between py-3 gap-2",children:e.jsxs(t.Menu,{placement:"right-start",children:[e.jsx(t.MenuHandler,{children:e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(k,{}),"تعديل حالة الطلب"]})}),e.jsx(t.MenuList,{className:"-mt-3 ml-2 py-1",children:w.map(a=>e.jsx(t.MenuItem,{onClick:()=>l(a.value),children:a.text},a.value))})]})}),e.jsxs(t.MenuItem,{className:"flex items-center py-3 gap-2",children:[e.jsx(g,{}),"حذف الطلب"]})]})]})})]}),e.jsx("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-right text-gray-500 dark:text-gray-400 border",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{onChange:a=>a.target.checked?n(x=>c.filter(r=>r.status!=="cancel").map(r=>r.id)):n([]),disabled:c.length<1,id:"checkbox-all-search",type:"checkbox",className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsx("label",{htmlFor:"checkbox-all-search",className:"sr-only",children:"checkbox"})]})}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"الاسم"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"رقم الطلب"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"الحاله"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"الاجمالي"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"التاريخ"})]})}),e.jsx("tbody",{children:c.map(a=>e.jsx(v,{order:a,selectedOrder:s,setSelectedOrder:n},a==null?void 0:a.id))})]})})]})},P=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container",children:[e.jsx(b,{links:[{text:"الطلبات",href:"/orders"}]}),e.jsx("div",{className:"group-client mb-6",children:e.jsx("div",{className:" flex justify-between items-center mb-5",children:e.jsx("div",{className:"btn ms-auto",children:e.jsxs("div",{className:"flex gap-1 text-sm font-medium text-gray-500",children:[e.jsx(y,{}),e.jsxs(t.Menu,{placement:"bottom-end",children:[e.jsx(t.MenuHandler,{children:e.jsxs(t.Button,{className:"px-2 md:px-6 flex items-center gap-2 cursor-pointer",variant:"text",color:"purple",children:[e.jsx(f,{}),"خدمات"]})}),e.jsx(t.MenuList,{className:"p-0",children:e.jsxs("a",{href:"#",className:"flex gap-2 items-center w-full p-3",children:[e.jsx(j,{}),"تصنيفات المنتجات"]})})]})]})})})}),e.jsx(M,{})]})});export{P as default};
