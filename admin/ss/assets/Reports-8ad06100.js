import{r as h,j as s,M as g,b as l,L as j,ad as o,e as u,f as N,ae as y,af as b,ag as f}from"./index-a646533f.js";import{B as p}from"./BreadCrumbs-b9ca7c48.js";import{a as k}from"./index.esm-041452e2.js";import{a as v}from"./index.esm-e3d69749.js";import{P as w}from"./Pagination-eee932df.js";const M=({report:e,selectedReport:i,setSelectedReport:n})=>{const[x,t]=h.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsxs(g,{open:x,setOpen:t,children:[s.jsx(l.DialogHeader,{className:"bg-gray-50",children:"تفاصيل الشكوى"}),s.jsxs(l.DialogBody,{divider:!0,children:[s.jsxs("div",{className:"name font-medium text-gray-500",children:[s.jsx("p",{className:"inline-block ml-3",children:"اسم العميل :"}),s.jsx("span",{className:"",children:e==null?void 0:e.user.name})]}),s.jsx("hr",{className:"my-3"}),s.jsxs("div",{className:"phone font-medium text-gray-500",children:[s.jsx("p",{className:"inline-block ml-3",children:"رقم الهاتف :"}),s.jsx("span",{className:"",children:e==null?void 0:e.user.phone})]}),s.jsx("hr",{className:"my-3"}),s.jsxs("div",{className:"email font-medium text-gray-500",children:[s.jsx("p",{className:"inline-block ml-3",children:"الايميل :"}),s.jsx("span",{className:"",children:e==null?void 0:e.user.email})]}),s.jsx("hr",{className:"my-3"}),s.jsxs("div",{className:"num-order font-medium text-gray-500",children:[s.jsx("p",{className:"inline-block ml-3",children:"رقم الشكوي :"}),s.jsx("span",{className:"",children:e==null?void 0:e.id})]}),s.jsx("hr",{className:"my-3"}),s.jsxs("div",{className:"details font-medium text-gray-500",children:[s.jsx("p",{className:"inline-block ml-3",children:"تفاصيل الشكوى :"}),s.jsx("span",{className:"",children:e==null?void 0:e.description})]}),s.jsx("hr",{className:"my-3"}),s.jsxs("div",{className:"pic font-medium text-gray-500",children:[s.jsx("p",{className:"inline-block ml-3",children:"صورة الشكوى :"}),s.jsx(j,{to:"#",target:"_blank",className:"border px-3 py-1 rounded-md bg-purple-400 hover:bg-purple-600 duration-300 text-white",children:"عرض"})]}),s.jsx("hr",{className:"my-3"}),s.jsxs("div",{className:"type font-medium text-gray-500",children:[s.jsx("p",{className:"inline-block ml-3",children:"حالة الشكوى :"}),s.jsx("span",{className:"text-red-300",children:e==null?void 0:e.status})]})]}),s.jsx(l.DialogFooter,{children:s.jsx(l.Button,{variant:"text",color:"red",onClick:()=>t(!1),className:"mr-1",children:s.jsx("span",{children:"الغاء"})})})]}),s.jsxs("tr",{onClick:()=>t(!0),className:"bg-white breport-b cursor-pointer dark:bg-gray-800 dark:breport-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[s.jsx("td",{className:"w-4 p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{onClick:c=>c.stopPropagation(),id:e==null?void 0:e.id,disabled:(e==null?void 0:e.status)==="cancel",onChange:c=>c.target.checked?n(d=>[...d,+c.target.id]):n(d=>d.filter(m=>m!==+c.target.id)),type:"checkbox",checked:i.findIndex(c=>c===(e==null?void 0:e.id))>=0,className:"w-4 h-4 text-blue-600 bg-gray-100 bproduct-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:bproduct-gray-600 cursor-pointer"}),s.jsx("label",{htmlFor:e==null?void 0:e.id,className:"sr-only",children:"checkbox"})]})}),s.jsx("td",{className:"px-6 py-4 text-gray-900 whitespace-nowrap dark:text-white",children:s.jsx("div",{className:"pl-3 ",children:s.jsx("div",{className:"text-md font-semibold",children:e==null?void 0:e.title})})}),s.jsx("td",{className:"px-6 py-4 text-gray-900 whitespace-nowrap dark:text-white",children:s.jsx("div",{className:"pl-3 ",children:s.jsx("div",{className:"text-md font-semibold",children:e==null?void 0:e.user.name})})}),s.jsxs("td",{className:"px-6 min-w-[150px] py-4",children:[e==null?void 0:e.status,s.jsx("span",{className:`w-2 h-2 rounded-full mr-2 inline-block ${o[e==null?void 0:e.status]}`})]}),s.jsxs("td",{className:"px-6  py-4",children:[" ",new Date(e==null?void 0:e.updated_at).toLocaleDateString()]}),s.jsx("td",{className:"px-6  py-4",children:new Date(e==null?void 0:e.created_at).toLocaleDateString()})]})]})},C=[{text:"حلت",value:"pending"},{text:"لم تحل",value:"verified"},{text:"قيد المراجعه",value:"shipping"}],D=()=>{const[e,i]=h.useState([]),{reports:n,from:x,to:t,current:c}=u(a=>a.report);console.log(e);const d=N(),m=async a=>{e.length>0&&(await d(b({ids:e,status:a})),i([]))};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-gray-700 bg-gray-50 dark:bg-gray-700 dark:text-gray-400 flex justify-between w-full py-3 px-[18px]",children:[s.jsx("div",{className:"col flex items-center gap-2",children:s.jsxs("div",{className:"text flex items-center gap-1",children:[s.jsx("p",{className:"my-1 font-semibold",children:"الشكاوي"}),s.jsxs("span",{className:"text-xs mr-1 text-gray-500",children:["(",n.length," شكوي)"]})]})}),s.jsx("div",{className:"col",children:s.jsxs(l.Menu,{placement:"bottom-end",children:[s.jsx(l.MenuHandler,{children:s.jsxs("div",{className:"breport select-none breport-purple-500 rounded-sm p-2 flex items-center gap-1 cursor-pointer text-xs",children:[s.jsx(k,{}),"تحرير سريع"]})}),s.jsx(l.MenuList,{className:"p-0",children:s.jsx(l.MenuItem,{className:"flex items-center justify-between py-3 gap-2",children:s.jsxs(l.Menu,{placement:"right-start",children:[s.jsx(l.MenuHandler,{children:s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx(v,{}),"تعديل حالة الشكوي"]})}),s.jsx(l.MenuList,{className:"-mt-3 ml-2 py-1",children:C.map(a=>s.jsx(l.MenuItem,{onClick:()=>m(a.text),children:a.text},a.value))})]})})})]})})]}),s.jsxs("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg",children:[s.jsxs("table",{className:"w-full text-sm text-right text-gray-500 dark:text-gray-400 breport",children:[s.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{onChange:a=>a.target.checked?i(L=>n.filter(r=>r.status!=="cancel").map(r=>r.id)):i([]),disabled:n.length<1,id:"checkbox-all-search",type:"checkbox",className:"w-4 h-4 text-blue-600 bg-gray-100 breport-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:breport-gray-600"}),s.jsx("label",{htmlFor:"checkbox-all-search",className:"sr-only",children:"checkbox"})]})}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"عنوان الشكوي"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"اسم صاحب الشكوي"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"الحاله"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"تاريخ الانشاء"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"تاريخ اخر تعديل"})]})}),s.jsx("tbody",{children:n.map(a=>s.jsx(M,{report:a,selectedReport:e,setSelectedReport:i},a==null?void 0:a.id))})]}),s.jsx(w,{from:x,to:t,current:c,action:a=>d(y({page:a}))})]})]})},I=()=>s.jsx(s.Fragment,{children:s.jsx("div",{className:"complaints",children:s.jsxs("div",{className:"container",children:[s.jsx(p,{links:[{text:"الشكاوى",href:"/complaints"}]}),s.jsxs("div",{className:"complaints-table relative overflow-x-auto shadow-md sm:rounded-lg border",children:[s.jsxs("h3",{className:"w-full p-4 bg-gray-50 font-semibold text-gray-600",children:[s.jsx(f,{className:"ml-3 text-xl font-bold inline-block"}),"شكاوى العملاء"]}),s.jsx(D,{})]})]})})});export{I as default};
